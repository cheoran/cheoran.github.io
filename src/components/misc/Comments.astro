---
import { Icon } from "astro-icon/components";
import { commentsConfig } from "../../config";

const ready =
	commentsConfig.repo &&
	commentsConfig.repoId &&
	commentsConfig.category &&
	commentsConfig.categoryId;
---

<section class="mt-8 pt-6 border-t border-dashed border-[var(--line-divider)]">
	{
		ready ? (
			<div class="giscus" data-theme="preferred_color_scheme">
				<script
					src="https://giscus.app/client.js"
					data-repo={commentsConfig.repo}
					data-repo-id={commentsConfig.repoId}
					data-category={commentsConfig.category}
					data-category-id={commentsConfig.categoryId}
					data-mapping={commentsConfig.mapping}
					data-reactions-enabled={commentsConfig.reactionsEnabled}
					data-emit-metadata={commentsConfig.emitMetadata}
					data-input-position={commentsConfig.inputPosition}
					data-theme={commentsConfig.theme}
					data-lang={commentsConfig.lang}
					crossorigin="anonymous"
					async
				></script>
			</div>
		) : (
			<p class="text-60">
				Giscus 설정이 비어있어요. `src/config.ts`의 `commentsConfig`에 repoId와 categoryId를 입력해 주세요.
			</p>
		)
	}
</section>
